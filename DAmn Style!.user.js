// ==UserScript==
// @name         DAmn Styler + Autojoin!
// @namespace    https://www.deviantart.com/jcoolarts
// @version      0.1
// @description  Styles DeviantArt Chat Room, and allows autojoining.
// @author       jcoolarts and electricjonny
// @include      https://chat.deviantart.com/chat/*
// @grant        none
// @require http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js
// ==/UserScript==
function freeFunctionString(t){return t.replace(/^\s*function\s*\(\)\s*\{/,"").replace(/\}\s*$/,"")}function freeFunctionString(t){return t.replace(/^\s*function\s*\(\)\s*\{/,"").replace(/\}\s*$/,"")}autojoin_script=document.createElement("script"),autojoinScript=freeFunctionString(function(){jQuery.easing.jswing=jQuery.easing.swing,jQuery.extend(jQuery.easing,{def:"easeOutQuad",swing:function(t,o,e,a,n){return jQuery.easing[jQuery.easing.def](t,o,e,a,n)},easeInQuad:function(t,o,e,a,n){return a*(o/=n)*o+e},easeOutQuad:function(t,o,e,a,n){return-a*(o/=n)*(o-2)+e},easeInOutQuad:function(t,o,e,a,n){return(o/=n/2)<1?a/2*o*o+e:-a/2*(--o*(o-2)-1)+e},easeInCubic:function(t,o,e,a,n){return a*(o/=n)*o*o+e},easeOutCubic:function(t,o,e,a,n){return a*((o=o/n-1)*o*o+1)+e},easeInOutCubic:function(t,o,e,a,n){return(o/=n/2)<1?a/2*o*o*o+e:a/2*((o-=2)*o*o+2)+e},easeInQuart:function(t,o,e,a,n){return a*(o/=n)*o*o*o+e},easeOutQuart:function(t,o,e,a,n){return-a*((o=o/n-1)*o*o*o-1)+e},easeInOutQuart:function(t,o,e,a,n){return(o/=n/2)<1?a/2*o*o*o*o+e:-a/2*((o-=2)*o*o*o-2)+e},easeInQuint:function(t,o,e,a,n){return a*(o/=n)*o*o*o*o+e},easeOutQuint:function(t,o,e,a,n){return a*((o=o/n-1)*o*o*o*o+1)+e},easeInOutQuint:function(t,o,e,a,n){return(o/=n/2)<1?a/2*o*o*o*o*o+e:a/2*((o-=2)*o*o*o*o+2)+e},easeInSine:function(t,o,e,a,n){return-a*Math.cos(o/n*(Math.PI/2))+a+e},easeOutSine:function(t,o,e,a,n){return a*Math.sin(o/n*(Math.PI/2))+e},easeInOutSine:function(t,o,e,a,n){return-a/2*(Math.cos(Math.PI*o/n)-1)+e},easeInExpo:function(t,o,e,a,n){return 0==o?e:a*Math.pow(2,10*(o/n-1))+e},easeOutExpo:function(t,o,e,a,n){return o==n?e+a:a*(1-Math.pow(2,-10*o/n))+e},easeInOutExpo:function(t,o,e,a,n){return 0==o?e:o==n?e+a:(o/=n/2)<1?a/2*Math.pow(2,10*(o-1))+e:a/2*(2-Math.pow(2,-10*--o))+e},easeInCirc:function(t,o,e,a,n){return-a*(Math.sqrt(1-(o/=n)*o)-1)+e},easeOutCirc:function(t,o,e,a,n){return a*Math.sqrt(1-(o=o/n-1)*o)+e},easeInOutCirc:function(t,o,e,a,n){return(o/=n/2)<1?-a/2*(Math.sqrt(1-o*o)-1)+e:a/2*(Math.sqrt(1-(o-=2)*o)+1)+e},easeInElastic:function(t,o,e,a,n){var i=1.70158,s=0,r=a;if(0==o)return e;if(1==(o/=n))return e+a;if(s||(s=.3*n),r<Math.abs(a)){r=a;i=s/4}else i=s/(2*Math.PI)*Math.asin(a/r);return-r*Math.pow(2,10*(o-=1))*Math.sin((o*n-i)*(2*Math.PI)/s)+e},easeOutElastic:function(t,o,e,a,n){var i=1.70158,s=0,r=a;if(0==o)return e;if(1==(o/=n))return e+a;if(s||(s=.3*n),r<Math.abs(a)){r=a;i=s/4}else i=s/(2*Math.PI)*Math.asin(a/r);return r*Math.pow(2,-10*o)*Math.sin((o*n-i)*(2*Math.PI)/s)+a+e},easeInOutElastic:function(t,o,e,a,n){var i=1.70158,s=0,r=a;if(0==o)return e;if(2==(o/=n/2))return e+a;if(s||(s=n*(.3*1.5)),r<Math.abs(a)){r=a;i=s/4}else i=s/(2*Math.PI)*Math.asin(a/r);return o<1?r*Math.pow(2,10*(o-=1))*Math.sin((o*n-i)*(2*Math.PI)/s)*-.5+e:r*Math.pow(2,-10*(o-=1))*Math.sin((o*n-i)*(2*Math.PI)/s)*.5+a+e},easeInBack:function(t,o,e,a,n,i){return null==i&&(i=1.70158),a*(o/=n)*o*((i+1)*o-i)+e},easeOutBack:function(t,o,e,a,n,i){return null==i&&(i=1.70158),a*((o=o/n-1)*o*((i+1)*o+i)+1)+e},easeInOutBack:function(t,o,e,a,n,i){return null==i&&(i=1.70158),(o/=n/2)<1?a/2*(o*o*((1+(i*=1.525))*o-i))+e:a/2*((o-=2)*o*((1+(i*=1.525))*o+i)+2)+e},easeInBounce:function(t,o,e,a,n){return a-jQuery.easing.easeOutBounce(t,n-o,0,a,n)+e},easeOutBounce:function(t,o,e,a,n){return(o/=n)<1/2.75?a*(7.5625*o*o)+e:o<2/2.75?a*(7.5625*(o-=1.5/2.75)*o+.75)+e:o<2.5/2.75?a*(7.5625*(o-=2.25/2.75)*o+.9375)+e:a*(7.5625*(o-=2.625/2.75)*o+.984375)+e},easeInOutBounce:function(t,o,e,a,n){return o<n/2?.5*jQuery.easing.easeInBounce(t,2*o,0,a,n)+e:.5*jQuery.easing.easeOutBounce(t,2*o-n,0,a,n)+.5*a+e}}),void 0===jQuery.migrateMute&&(jQuery.migrateMute=!0),function(c,e,l){function d(t){var o=e.console;a[t]||(a[t]=!0,c.migrateWarnings.push(t),o&&o.warn&&!c.migrateMute&&(o.warn("JQMIGRATE: "+t),c.migrateTrace&&o.trace&&o.trace()))}function t(t,o,e,a){if(Object.defineProperty)try{return Object.defineProperty(t,o,{configurable:!0,enumerable:!0,get:function(){return d(a),e},set:function(t){d(a),e=t}}),l}catch(t){}c._definePropertyBroken=!0,t[o]=e}var a={};c.migrateWarnings=[],!c.migrateMute&&e.console&&e.console.log&&e.console.log("JQMIGRATE: Logging is active"),c.migrateTrace===l&&(c.migrateTrace=!0),c.migrateReset=function(){a={},c.migrateWarnings.length=0},"BackCompat"===document.compatMode&&d("jQuery is not compatible with Quirks Mode");var s=c("<input/>",{size:1}).attr("size")&&c.attrFn,r=c.attr,n=c.attrHooks.value&&c.attrHooks.value.get||function(){return null},i=c.attrHooks.value&&c.attrHooks.value.set||function(){return l},u=/^(?:input|button)$/i,p=/^[238]$/,m=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,h=/^(?:checked|selected)$/i;t(c,"attrFn",s||{},"jQuery.attrFn is deprecated"),c.attr=function(t,o,e,a){var n=o.toLowerCase(),i=t&&t.nodeType;return a&&(r.length<4&&d("jQuery.fn.attr( props, pass ) is deprecated"),t&&!p.test(i)&&(s?o in s:c.isFunction(c.fn[o])))?c(t)[o](e):("type"===o&&e!==l&&u.test(t.nodeName)&&t.parentNode&&d("Can't change the 'type' of an input or button in IE 6/7/8"),!c.attrHooks[n]&&m.test(n)&&(c.attrHooks[n]={get:function(t,o){var e,a=c.prop(t,o);return!0===a||"boolean"!=typeof a&&(e=t.getAttributeNode(o))&&!1!==e.nodeValue?o.toLowerCase():l},set:function(t,o,e){var a;return!1===o?c.removeAttr(t,e):((a=c.propFix[e]||e)in t&&(t[a]=!0),t.setAttribute(e,e.toLowerCase())),e}},h.test(n)&&d("jQuery.fn.attr('"+n+"') may use property instead of attribute")),r.call(c,t,o,e))},c.attrHooks.value={get:function(t,o){var e=(t.nodeName||"").toLowerCase();return"button"===e?n.apply(this,arguments):("input"!==e&&"option"!==e&&d("jQuery.fn.attr('value') no longer gets properties"),o in t?t.value:null)},set:function(t,o){var e=(t.nodeName||"").toLowerCase();return"button"===e?i.apply(this,arguments):("input"!==e&&"option"!==e&&d("jQuery.fn.attr('value', val) no longer sets properties"),t.value=o,l)}};var o,f,v=c.fn.init,g=c.parseJSON,j=/^([^<]*)(<[\w\W]+>)([^>]*)$/;c.fn.init=function(t,o,e){var a;return t&&"string"==typeof t&&!c.isPlainObject(o)&&(a=j.exec(c.trim(t)))&&a[0]&&("<"!==t.charAt(0)&&d("$(html) HTML strings must start with '<' character"),a[3]&&d("$(html) HTML text after last tag is ignored"),"#"===a[0].charAt(0)&&(d("HTML string cannot start with a '#' character"),c.error("JQMIGRATE: Invalid selector string (XSS)")),o&&o.context&&(o=o.context),c.parseHTML)?v.call(this,c.parseHTML(a[2],o,!0),o,e):v.apply(this,arguments)},c.fn.init.prototype=c.fn,c.parseJSON=function(t){return t||null===t?g.apply(this,arguments):(d("jQuery.parseJSON requires a valid JSON string"),null)},c.uaMatch=function(t){t=t.toLowerCase();var o=/(chrome)[ \/]([\w.]+)/.exec(t)||/(webkit)[ \/]([\w.]+)/.exec(t)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(t)||/(msie) ([\w.]+)/.exec(t)||t.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(t)||[];return{browser:o[1]||"",version:o[2]||"0"}},c.browser||(f={},(o=c.uaMatch(navigator.userAgent)).browser&&(f[o.browser]=!0,f.version=o.version),f.chrome?f.webkit=!0:f.webkit&&(f.safari=!0),c.browser=f),t(c,"browser",c.browser,"jQuery.browser is deprecated"),c.sub=function(){function e(t,o){return new e.fn.init(t,o)}c.extend(!0,e,this),e.superclass=this,((e.fn=e.prototype=this()).constructor=e).sub=this.sub,e.fn.init=function(t,o){return o&&o instanceof c&&!(o instanceof e)&&(o=e(o)),c.fn.init.call(this,t,o,a)},e.fn.init.prototype=e.fn;var a=e(document);return d("jQuery.sub() is deprecated"),e},c.ajaxSetup({converters:{"text json":c.parseJSON}});var x=c.fn.data;c.fn.data=function(t){var o,e,a=this[0];return!a||"events"!==t||1!==arguments.length||(o=c.data(a,t),e=c._data(a,t),o!==l&&o!==e||e===l)?x.apply(this,arguments):(d("Use of jQuery.fn.data('events') is deprecated"),e)};var A=/\/(java|ecma)script/i,b=c.fn.andSelf||c.fn.addBack;c.fn.andSelf=function(){return d("jQuery.fn.andSelf() replaced by jQuery.fn.addBack()"),b.apply(this,arguments)},c.clean||(c.clean=function(t,o,e,a){o=(o=!(o=o||document).nodeType&&o[0]||o).ownerDocument||o,d("jQuery.clean() is deprecated");var n,i,s,r,u=[];if(c.merge(u,c.buildFragment(t,o).childNodes),e)for(s=function(t){return!t.type||A.test(t.type)?a?a.push(t.parentNode?t.parentNode.removeChild(t):t):e.appendChild(t):l},n=0;null!=(i=u[n]);n++)c.nodeName(i,"script")&&s(i)||(e.appendChild(i),i.getElementsByTagName!==l&&(r=c.grep(c.merge([],i.getElementsByTagName("script")),s),u.splice.apply(u,[n+1,0].concat(r)),n+=r.length));return u});var y=c.event.add,$=c.event.remove,M=c.event.trigger,R=c.fn.toggle,C=c.fn.live,w=c.fn.die,I="ajaxStart|ajaxStop|ajaxSend|ajaxComplete|ajaxError|ajaxSuccess",E=RegExp("\\b(?:"+I+")\\b"),S=/(?:^|\s)hover(\.\S+|)\b/,Q=function(t){return"string"!=typeof t||c.event.special.hover?t:(S.test(t)&&d("'hover' pseudo-event is deprecated, use 'mouseenter mouseleave'"),t&&t.replace(S,"mouseenter$1 mouseleave$1"))};c.event.props&&"attrChange"!==c.event.props[0]&&c.event.props.unshift("attrChange","attrName","relatedNode","srcElement"),c.event.dispatch&&t(c.event,"handle",c.event.dispatch,"jQuery.event.handle is undocumented and deprecated"),c.event.add=function(t,o,e,a,n){t!==document&&E.test(o)&&d("AJAX events should be attached to document: "+o),y.call(this,t,Q(o||""),e,a,n)},c.event.remove=function(t,o,e,a,n){$.call(this,t,Q(o)||"",e,a,n)},c.fn.error=function(){var t=Array.prototype.slice.call(arguments,0);return d("jQuery.fn.error() is deprecated"),t.splice(0,0,"error"),arguments.length?this.bind.apply(this,t):(this.triggerHandler.apply(this,t),this)},c.fn.toggle=function(e,t){if(!c.isFunction(e)||!c.isFunction(t))return R.apply(this,arguments);d("jQuery.fn.toggle(handler, handler...) is deprecated");var a=arguments,o=e.guid||c.guid++,n=0,i=function(t){var o=(c._data(this,"lastToggle"+e.guid)||0)%n;return c._data(this,"lastToggle"+e.guid,o+1),t.preventDefault(),a[o].apply(this,arguments)||!1};for(i.guid=o;a.length>n;)a[n++].guid=o;return this.click(i)},c.fn.live=function(t,o,e){return d("jQuery.fn.live() is deprecated"),C?C.apply(this,arguments):(c(this.context).on(t,this.selector,o,e),this)},c.fn.die=function(t,o){return d("jQuery.fn.die() is deprecated"),w?w.apply(this,arguments):(c(this.context).off(t,this.selector||"**",o),this)},c.event.trigger=function(t,o,e,a){return e||E.test(t)||d("Global events are undocumented and deprecated"),M.call(this,t,o,e||document,a)},c.each(I.split("|"),function(t,o){c.event.special[o]={setup:function(){var t=this;return t!==document&&(c.event.add(document,o+"."+c.guid,function(){c.event.trigger(o,null,t,!0)}),c._data(this,o,c.guid++)),!1},teardown:function(){return this!==document&&c.event.remove(document,o+"."+c._data(this,o)),!1}}})}(jQuery,window),jQuery.easing.jswing=jQuery.easing.swing,jQuery.extend(jQuery.easing,{def:"easeOutQuad",swing:function(t,o,e,a,n){return jQuery.easing[jQuery.easing.def](t,o,e,a,n)},easeInQuad:function(t,o,e,a,n){return a*(o/=n)*o+e},easeOutQuad:function(t,o,e,a,n){return-a*(o/=n)*(o-2)+e},easeInOutQuad:function(t,o,e,a,n){return(o/=n/2)<1?a/2*o*o+e:-a/2*(--o*(o-2)-1)+e},easeInCubic:function(t,o,e,a,n){return a*(o/=n)*o*o+e},easeOutCubic:function(t,o,e,a,n){return a*((o=o/n-1)*o*o+1)+e},easeInOutCubic:function(t,o,e,a,n){return(o/=n/2)<1?a/2*o*o*o+e:a/2*((o-=2)*o*o+2)+e},easeInQuart:function(t,o,e,a,n){return a*(o/=n)*o*o*o+e},easeOutQuart:function(t,o,e,a,n){return-a*((o=o/n-1)*o*o*o-1)+e},easeInOutQuart:function(t,o,e,a,n){return(o/=n/2)<1?a/2*o*o*o*o+e:-a/2*((o-=2)*o*o*o-2)+e},easeInQuint:function(t,o,e,a,n){return a*(o/=n)*o*o*o*o+e},easeOutQuint:function(t,o,e,a,n){return a*((o=o/n-1)*o*o*o*o+1)+e},easeInOutQuint:function(t,o,e,a,n){return(o/=n/2)<1?a/2*o*o*o*o*o+e:a/2*((o-=2)*o*o*o*o+2)+e},easeInSine:function(t,o,e,a,n){return-a*Math.cos(o/n*(Math.PI/2))+a+e},easeOutSine:function(t,o,e,a,n){return a*Math.sin(o/n*(Math.PI/2))+e},easeInOutSine:function(t,o,e,a,n){return-a/2*(Math.cos(Math.PI*o/n)-1)+e},easeInExpo:function(t,o,e,a,n){return 0==o?e:a*Math.pow(2,10*(o/n-1))+e},easeOutExpo:function(t,o,e,a,n){return o==n?e+a:a*(1-Math.pow(2,-10*o/n))+e},easeInOutExpo:function(t,o,e,a,n){return 0==o?e:o==n?e+a:(o/=n/2)<1?a/2*Math.pow(2,10*(o-1))+e:a/2*(2-Math.pow(2,-10*--o))+e},easeInCirc:function(t,o,e,a,n){return-a*(Math.sqrt(1-(o/=n)*o)-1)+e},easeOutCirc:function(t,o,e,a,n){return a*Math.sqrt(1-(o=o/n-1)*o)+e},easeInOutCirc:function(t,o,e,a,n){return(o/=n/2)<1?-a/2*(Math.sqrt(1-o*o)-1)+e:a/2*(Math.sqrt(1-(o-=2)*o)+1)+e},easeInElastic:function(t,o,e,a,n){var i=1.70158,s=0,r=a;if(0==o)return e;if(1==(o/=n))return e+a;if(s||(s=.3*n),r<Math.abs(a)){r=a;i=s/4}else i=s/(2*Math.PI)*Math.asin(a/r);return-r*Math.pow(2,10*(o-=1))*Math.sin((o*n-i)*(2*Math.PI)/s)+e},easeOutElastic:function(t,o,e,a,n){var i=1.70158,s=0,r=a;if(0==o)return e;if(1==(o/=n))return e+a;if(s||(s=.3*n),r<Math.abs(a)){r=a;i=s/4}else i=s/(2*Math.PI)*Math.asin(a/r);return r*Math.pow(2,-10*o)*Math.sin((o*n-i)*(2*Math.PI)/s)+a+e},easeInOutElastic:function(t,o,e,a,n){var i=1.70158,s=0,r=a;if(0==o)return e;if(2==(o/=n/2))return e+a;if(s||(s=n*(.3*1.5)),r<Math.abs(a)){r=a;i=s/4}else i=s/(2*Math.PI)*Math.asin(a/r);return o<1?r*Math.pow(2,10*(o-=1))*Math.sin((o*n-i)*(2*Math.PI)/s)*-.5+e:r*Math.pow(2,-10*(o-=1))*Math.sin((o*n-i)*(2*Math.PI)/s)*.5+a+e},easeInBack:function(t,o,e,a,n,i){return null==i&&(i=1.70158),a*(o/=n)*o*((i+1)*o-i)+e},easeOutBack:function(t,o,e,a,n,i){return null==i&&(i=1.70158),a*((o=o/n-1)*o*((i+1)*o+i)+1)+e},easeInOutBack:function(t,o,e,a,n,i){return null==i&&(i=1.70158),(o/=n/2)<1?a/2*(o*o*((1+(i*=1.525))*o-i))+e:a/2*((o-=2)*o*((1+(i*=1.525))*o+i)+2)+e},easeInBounce:function(t,o,e,a,n){return a-jQuery.easing.easeOutBounce(t,n-o,0,a,n)+e},easeOutBounce:function(t,o,e,a,n){return(o/=n)<1/2.75?a*(7.5625*o*o)+e:o<2/2.75?a*(7.5625*(o-=1.5/2.75)*o+.75)+e:o<2.5/2.75?a*(7.5625*(o-=2.25/2.75)*o+.9375)+e:a*(7.5625*(o-=2.625/2.75)*o+.984375)+e},easeInOutBounce:function(t,o,e,a,n){return o<n/2?.5*jQuery.easing.easeInBounce(t,2*o,0,a,n)+e:.5*jQuery.easing.easeOutBounce(t,2*o-n,0,a,n)+.5*a+e}}),DWait.ready(["jms/pages/chat07/chatpage.js","jms/pages/chat07/dAmn.js","jms/pages/chat07/dAmnChat.js"],function(){var autojoinChanList="",autojoinChanListJS="",autojoinChanListHTML="";function autojoin(){if(null==localStorage.autojoinList||""==localStorage.autojoinList||void 0===localStorage.autojoinList)localStorage.autojoinList="",autojoinConfig();else{autojoinChanList=localStorage.autojoinList,autojoinChanList=autojoinChanList.replace(/<\/div>/g,",").replace(/(<([^>]+)>)/gi,""),autojoinChanList=autojoinChanList.split(",");for(var autojoinChanListJS='dAmn_Command("send", "join chat:'+autojoinChanList[0]+'\\n");',autojoinChanListHTML='<div class="chanName">'+autojoinChanList[0]+"</div>",i=1;i<autojoinChanList.length;i++)autojoinChanListHTML+='<div class="chanName">'+autojoinChanList[i]+"</div>",autojoinChanListJS+='dAmn_Command("send", "join chat:'+autojoinChanList[i]+'\\n");';eval(autojoinChanListJS)}}function autojoinConfig(){if(removeAllRooms=!1,automatic=!0,null!=localStorage.autojoinList&&""!=localStorage.autojoinList&&void 0!==localStorage.autojoinList||(localStorage.autojoinList=""),null!=localStorage.autojoinList||""!=localStorage.autojoinList||void 0!==localStorage.autojoinList){(autojoinChanList=(autojoinChanList=(autojoinChanList=localStorage.autojoinList).replace(/<\/div>/g,",").replace(/(<([^>]+)>)/gi,"")).split(","))[0];for(var t='<div class="chanName">'+autojoinChanList[0]+"</div>",o=1;o<autojoinChanList.length;o++)t+='<div class="chanName">'+autojoinChanList[o]+"</div>",'dAmn_Command("send", "join chat:'+autojoinChanList[o]+'\\n");';'<div class="chanName"></div>'==t&&(t="")}$("head").append('<style id="autojoinEditModalCSS" type="text/css">#autojoinEdit {position:fixed;bottom:-450px;left:70px;width:300px;height:auto;padding:0px 0px 0px 0px;background:#DAE4D9;display:inline-block;box-shadow:4px 4px 8px rgba(0,0,0,.6);border:1px solid #A6B2A6;border-radius:6px;z-index:200;}#autojoinEdit .x.autojoin {position:relative;left:210px; margin-left: 67px;}#autojoinEdit h3.autojoin {background:linear-gradient(180deg, #ECF2EA, #D6DBD4);margin-top:-17px;border-radius:6px 6px 0px 0px;border-bottom:1px solid #A6B2A6;text-align:center;box-shadow:0px 2px 5px 0px rgba(0,0,0,.15);padding:4px 0px 4px 0px;}#autojoinRooms {float:left;margin:12px 0px 0px 12px;height:248px;width:270px;background:#E9EfE8;border:1px solid #A6B2A6;text-align:left;padding:4px 2px 4px 2px;overflow:auto;}#autojoinEdit .autojoin.addrooms {position:relative;top:0px;left:15px;float:left;font-size:12pt;}#autojoinRoomsAdd {position:relative;left:20px;top:0px;border:1px solid #A6B3A6;background:#F5F9F4;width:203px;}#autojoinRoomsAddButton {position:relative;top:-18px;left:107px;background:#E6EDE4;border:1px solid #A6B2A6;border-radius:3px;padding:1px 3px 1px 3px;cursor:pointer;box-shadow:1px 1px 3px rgba(0,0,0,.3), 2px 2px 8px -4px rgba(255,255,255,.8) inset;}#autojoinRoomsAddButton:hover {background:#F4F9F2;}#autojoinRoomsAddButton:active {background:#E2E5E0;}#autojoinEdit .autojoin.bottombuttons {position:relative;top:8px;left:2px;float:left;}#autojoinEdit .autojoin.editbuttons {position: relative;left: 50px;top: 4px;width: 71px;height: 33px;clear: left;margin: 0px 0px 12px 0px;}#autojoinEdit .autojoin.editbuttons img {padding:4px;border-radius:3px;border:1px solid #A6B2A6;background:#E6EDE4;box-shadow:1px 1px 3px rgba(0,0,0,.3), 2px 2px 8px -4px rgba(255,255,255,.8) inset;cursor:pointer;}#autojoinEdit .autojoin.editbuttons img:hover {background:#F4F9F2;}#autojoinEdit .autojoin.editbuttons img:active {background:#E2E5E0;}#autojoinEdit .chanName {border:1px solid transparent;padding:0px 3px 0px 3px;margin:1px 0px 1px 0px;line-height:17px;cursor:pointer;display:table;}#autojoinEdit .chanName:hover {border:1px solid rgba(190,204,190,.4);background:rgba(0,0,0,.01);border-radius:3px;}#autojoinEdit .chanName.selected {border:1px solid #A6B2A6;background:rgba(0,0,0,.05);border-radius:3px;cursor:default;}#autojoinEdit .disabled, #autojoinEdit .disabled:hover {cursor:default;opacity:.4;background:#E6EDE4;box-shadow:0px 0px 2px rgba(0,0,0,.2);-webkit-filter:grayscale(1); font-size:12px;filter:grayscale(1);filter:url("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCiAgPGZpbHRlciBpZD0iZ3JleXNjYWxlIj4NCiAgICA8ZmVDb2xvck1hdHJpeCB0eXBlPSJzYXR1cmF0ZSIgdmFsdWVzPSIwIi8+DQogIDwvZmlsdGVyPg0KPC9zdmc+#greyscale");}#autojoinRoomsSave {position:relative;float:left;left:12px;top:0px;background:#E6EDE4;color:#2A6D15;font-size:10pt;border:1px solid #A6B2A6;border-radius:3px;padding:1px 3px 1px 3px;cursor:pointer;box-shadow:1px 1px 3px rgba(0,0,0,.3), 2px 2px 8px -4px rgba(255,255,255,.8) inset;}#autojoinRoomsCancel {position:relative;float:left;left:16px;top:0px;background:#E6EDE4;color:#1B156D;font-size:10pt;border:1px solid #A6B2A6;border-radius:3px;padding:1px 3px 1px 3px;cursor:pointer;box-shadow:1px 1px 3px rgba(0,0,0,.3), 2px 2px 8px -4px rgba(255,255,255,.8) inset;}#autojoinRoomsRemoveall {position:relative;left:128px;top:-24px;width:70px;background:#E6EDE4;color:#6D1518;font-size:12px;border:1px solid #A6B2A6;border-radius:3px;padding:1px 3px 1px 3px;cursor:pointer;box-shadow:1px 1px 3px rgba(0,0,0,.3), 2px 2px 8px -4px rgba(255,255,255,.8) inset;}#autojoinRoomsSave:hover {background:#F4F9F2;}#autojoinRoomsCancel:hover {background:#F4F9F2;}#autojoinRoomsRemoveall:hover {background:#F4F9F2;}#autojoinRoomsSave:active {background:#E2E5E0;}#autojoinRoomsCancel:active {background:#E2E5E0;}#autojoinRoomsRemoveall:active {background:#E2E5E0;}#automaticJoin {text-align:left;white-space:pre-wrap;width:100px;position:relative;top:-10px;right:120px;}</style>');var e='<div id="autojoinEdit"><a class="x autojoin"></a><h3 class="autojoin">Autojoin Configuration</h3><div id="autojoinRooms">'+t+'</div><div class="autojoin editbuttons"><img src="data:image/gif;base64,R0lGODlhDAAMALMPAN5/f+yNjf/b29Jzc+OEhPWWlrFSUq1OTstsbMFiYv2env/U1Nh5eaVGRv///////yH5BAEAAA8ALAAAAAAMAAwAQARV8JnTqj3mtcDEQsgiDAOlBIIjpAIQTAoRcAxBMIXRFMiwOI5PAoCRAY4AxiBpMCgUhWhhNtVBVzbsq6EYMH7BASJA4aQWvw/jcAj0EIlEb5iZWC6ZCAA7" class="disabled" id="autojoinRoomsRemove"> <img src="data:image/gif;base64,R0lGODlhCgALAKIHAJmZmZaglnJ8da+3rzdGRgAAAGZmZv///yH5BAEAAAcALAAAAAAKAAsAQAMjeHpmu2QI4pSJIctS765LAz4E9YQC93jBd5QwLABWqZKtqSQAOw==" class="moveUp disabled" id="autojoinRoomsMoveup"> <img src="data:image/gif;base64,R0lGODlhCgALAKIHAJmZmZaglnJ8da+3rzdGRgAAAGZmZv///yH5BAEAAAcALAAAAAAKAAsAQAMleHpGtMoUMYiB0Vzc6GPTEIzVlmERIX6L5GyA4MwzSAUlJAlmAgA7" class="moveDown disabled" id="autojoinRoomsMovedown"> <div id="autojoinRoomsRemoveall">Remove all</div></div><div class="autojoin addrooms" style="font-size:10px;">Add a room:</div><input id="autojoinRoomsAdd" type"text" spellcheck="false"></input><br><span id="autojoinRoomsAddButton" class="disabled">Add</span><small class="autojoin" style="float:left;padding:0px;margin:4px 0px 0px 15px;line-height:10px;color:#7A7F7A;">/autojoin - Autojoin rooms</small><small class="autojoin" style="float:left;padding:0px;margin:0px 0px 0px 15px;line-height:8px;color:#7A7F7A;">/autojoinEdit - This screen</small><div class="autojoin bottombuttons"><div id="autojoinRoomsSave" class="disabled">Save</div><div id="autojoinRoomsCancel">Cancel</div><div id="automaticJoin" title="Join automatically on page load, or use the command /autojoin?"><input type="checkbox"></input>Automatic?</div></div></div></div>';document.getElementById("autojoinEdit")?$("#autojoinEdit").animate({bottom:"-450px"},300,"easeInQuad",function(){$("#autojoinEdit").remove()}):($("#output").append(e),$("#autojoinEdit").animate({bottom:"70px"},400,"easeOutQuad")),""==$("#autojoinRooms").html()&&$("#autojoinRoomsRemoveall").attr("class","disabled"),"automatic"==localStorage.autojoinAutomatic?$("#automaticJoin input").attr("checked","checked"):"manual"==localStorage.autojoinAutomatic&&$("#automaticJoin input").removeAttr("checked"),$("#autojoinRoomsAdd").keyup(function(t){if(""==$(this).val()||$(this).val().match(/[\!@#\$%\^&\*\(\)_\+\=`~\\\|\/\?\.,<> ]/)||$(this).val().match(/^[-]/)||$(this).val().match(/[-]$/))$("#autojoinRoomsAddButton").attr("class","disabled"),$("#autojoinRoomsAdd").css("border","1px solid #BF0000");else if($("#autojoinRoomsAddButton").attr("class",""),$("#autojoinRoomsAdd").css("border","1px solid #A6B3A6"),13==t.which){var o='<div class="chanName">'+$("#autojoinRoomsAdd").val()+"</div>";$("#autojoinRooms").html($("#autojoinRooms").html()+o),$("#autojoinRoomsAdd").val(""),$("#autojoinRoomsAddButton").attr("class","disabled"),$("#autojoinRoomsSave").removeAttr("class"),$("#autojoinRoomsRemoveall").removeAttr("class"),$(".chanName.selected").attr("class","chanName"),$(".autojoin.editbuttons img").attr("class","disabled"),1==removeAllRooms&&(removeAllRooms=!1)}}),$("#autojoinRoomsAddButton").click(function(){if(""!=$("#autojoinRoomsAdd").val()){var t='<div class="chanName">'+$("#autojoinRoomsAdd").val()+"</div>";$("#autojoinRooms").html($("#autojoinRooms").html()+t),$("#autojoinRoomsAdd").val(""),$("#autojoinRoomsAddButton").attr("class","disabled"),$("#autojoinRoomsSave").removeAttr("class"),$("#autojoinRoomsRemoveall").removeAttr("class"),$(".chanName.selected").attr("class","chanName"),$(".autojoin.editbuttons img").attr("class","disabled"),1==removeAllRooms&&(removeAllRooms=!1)}}),$(".chanName").live("click",function(){$(this).attr("class","chanName selected"),$(".autojoin.editbuttons img").removeAttr("class"),$(".chanName.selected").is(":only-child")?($("#autojoinRoomsMoveup").attr("class","disabled"),$("#autojoinRoomsMovedown").attr("class","disabled")):$(".chanName.selected").is(":first-child")?($("#autojoinRoomsMoveup").attr("class","disabled"),$("#autojoinRoomsMovedown").removeAttr("class")):$(".chanName.selected").is(":last-child")?($("#autojoinRoomsMovedown").attr("class","disabled"),$("#autojoinRoomsMoveup").removeAttr("class")):($("#autojoinRoomsMoveup").removeAttr("class"),$("#autojoinRoomsMovedown").removeAttr("class")),$(".chanName.selected").not($(this)).each(function(){$(this).attr("class","chanName"),$(".chanName.selected").remove()})}),$("#autojoinRoomsRemove").live("click",function(){$(".chanName.selected").remove(),$("#autojoinRoomsSave").removeAttr("class"),""==$("#autojoinRooms").html()&&($(".autojoin.editbuttons img").removeAttr("class"),$("#autojoinRoomsRemoveall").attr("class","disabled")),$(".autojoin.editbuttons img").attr("class","disabled"),$("#autojoinRoomsAdd").focus()}),$("#autojoinRoomsMoveup:not(.disabled)").live("click",function(){$(".chanName.selected").insertBefore($(".chanName.selected").prev()),$("#autojoinRoomsSave").removeAttr("class"),$(".chanName.selected").is(":only-child")?($("#autojoinRoomsMoveup").attr("class","disabled"),$("#autojoinRoomsMovedown").attr("class","disabled")):$(".chanName.selected").is(":first-child")?($("#autojoinRoomsMoveup").attr("class","disabled"),$("#autojoinRoomsMovedown").removeAttr("class")):$(".chanName.selected").is(":last-child")?($("#autojoinRoomsMovedown").attr("class","disabled"),$("#autojoinRoomsMoveup").removeAttr("class")):($("#autojoinRoomsMoveup").removeAttr("class"),$("#autojoinRoomsMovedown").removeAttr("class"))}),$("#autojoinRoomsMovedown:not(.disabled)").live("click",function(){$(".chanName.selected").insertAfter($(".chanName.selected").next()),$("#autojoinRoomsSave").removeAttr("class"),$(".chanName.selected").is(":only-child")?($("#autojoinRoomsMoveup").attr("class","disabled"),$("#autojoinRoomsMovedown").attr("class","disabled")):$(".chanName.selected").is(":first-child")?($("#autojoinRoomsMoveup").attr("class","disabled"),$("#autojoinRoomsMovedown").removeAttr("class")):$(".chanName.selected").is(":last-child")?($("#autojoinRoomsMovedown").attr("class","disabled"),$("#autojoinRoomsMoveup").removeAttr("class")):($("#autojoinRoomsMoveup").removeAttr("class"),$("#autojoinRoomsMovedown").removeAttr("class"))}),$("#autojoinRooms").click(function(){$(".chanName.selected").each(function(){$(this).attr("class","chanName")}),$(".autojoin.editbuttons img").attr("class","disabled")}),$("#autojoinRoomsSave:not(.disabled)").live("click",function(){var t=$("#autojoinRooms").html();(t=(t=t.replace(/<\/div>/g,",").replace(/(<([^>]+)>)/gi,"")).split(",")).pop();t[0],t[0];for(var o=1;o<t.length;o++)'<div class="chanName">'+t[o]+"</div>",'dAmn_Command("send", "join chat:'+t[o]+'\\n");';localStorage.autojoinList=t,1==removeAllRooms&&(localStorage.autojoinList=""),$("#autojoinEdit").animate({bottom:"-450px"},300,"easeInQuad",function(){$("#autojoinEdit").remove()}),$("#autojoinRoomsMoveup:not(.disabled)").die(),$("#autojoinRoomsMovedown:not(.disabled)").die(),1==automatic?localStorage.autojoinAutomatic="automatic":0==automatic&&(localStorage.autojoinAutomatic="manual"),window.setTimeout(function(){$('[class="damncrc-input "] *').focus()},200)}),$("#autojoinRoomsCancel, .x.autojoin").click(function(){$("#autojoinEdit").animate({bottom:"-450px"},300,"easeInQuad",function(){$("#autojoinEdit").remove()}),$("#autojoinRoomsMoveup:not(.disabled)").die(),$("#autojoinRoomsMovedown:not(.disabled)").die(),window.setTimeout(function(){$('[class="damncrc-input "] *').focus()},200)}),$("#autojoinRoomsRemoveall:not(.disabled)").live("click",function(){removeAllRooms=!0,$("#autojoinRooms").html(""),$("#autojoinRoomsSave").removeAttr("class"),$("#autojoinRoomsRemoveall").attr("class","disabled"),$(".autojoin.editbuttons img").attr("class","disabled"),$("#autojoinRoomsAdd").focus()}),$("#automaticJoin input").change(function(){$("#automaticJoin input").is(":checked")?automatic=!0:automatic=!1,$("#autojoinRoomsSave").removeAttr("class")}),window.setTimeout(function(){$("#autojoinRoomsAdd").focus()},200)}null!=localStorage.autojoinAutomatic&&"undefined"!=localStorage.autojoinAutomatic&&void 0!==localStorage.autojoinAutomatic||(localStorage.autojoinAutomatic="automatic"),"automatic"==localStorage.autojoinAutomatic&&window.setTimeout(function(){autojoin()},8e3),dAmnChanChat.prototype.autojoinCommands_Init=dAmnChanChat.prototype.Init,dAmnChanChat.prototype.Init=function(t,o,e){this.autojoinCommands_Init(t,o,e);var a=this.input;a.cmds.autojoin=[0],a.cmds.autojoinEdit=[0]},dAmnChatInput_onKey_autojoinCommands=dAmnChatInput_onKey,dAmnChatInput_onKey=function(t,o,e){var a=this.chatinput_el;if(13==o&&(e||!this.multiline||t.shiftKey||t.ctrlKey)){var n=a.value,i=/^\/(\S*)\s*(.*)$/i.exec(n);if(i){var s=i[1],r=(i[2],!1);if(s){switch(s){case"autojoin":autojoin(),r=!0;break;case"autojoinEdit":autojoinConfig(),r=!0}r&&a.value&&(a.value="",a.focus())}}}return!r&&!!this.onKey_autojoinCommands(t,o,e)},dAmnChatInput.prototype.onKey=dAmnChatInput_onKey,dAmnChatInput.prototype.onKey_autojoinCommands=dAmnChatInput_onKey_autojoinCommands})}.toString()),autojoin_script.appendChild(document.createTextNode(autojoinScript)),document.getElementsByTagName("head")[0].appendChild(autojoin_script),smooth_script=document.createElement("script"),smoothScript=freeFunctionString(function(){DWait.ready(["jms/pages/chat07/chatpage.js","jms/pages/chat07/dAmn.js","jms/pages/chat07/dAmnChat.js"],function(){null==localStorage.scrollTime&&(localStorage.scrollTime=330),dAmnChanChat.prototype.addDiv=function(t,o,e){scroll=!1,scroll2=!1;var a=this.scroll_el.scrollTop+this.scroll_el.clientHeight,n=this.scroll_el.scrollHeight;if(n-a<10&&(scroll=!0,scroll2=!0,$(this.scroll_el).animate({scrollTop:1e5},Number(localStorage.scrollTime)+50)),this.prev_scroll_height=0,300<=this.chat_el.childNodes.length)for(this.prev_scroll_height=this.scroll_el.scrollHeight,i=0;i<50;++i)dAmn_DeleteSelf(this.chat_el.childNodes[i]);o?($(t).slideDown(Number(localStorage.scrollTime)),this.scroll_once=!0,1==scroll2&&($(this.scroll_el).animate({scrollTop:1e5},Number(localStorage.scrollTime)+50),this.scroll_once=!0)):this.chat_el.appendChild(t),this.scroll_once=this.scroll,(2==e||1==e&&"pchat"==this.cr.nstype)&&dAmn_GetAttention(),dAmnChatTabs_newData(this.cr.ns,e),dAmn_InvalidateLayout()},dAmnChanChat.prototype.scroll_Init=dAmnChanChat.prototype.Init,dAmnChanChat.prototype.Init=function(t,o,e){this.scroll_Init(t,o,e),this.input.cmds.scrollspeed=[0]},dAmnChatInput_onKey_scroll=dAmnChatInput_onKey,dAmnChatInput_onKey=function(t,o,e){var a,n,i=this.chatinput_el;if(13==o&&(e||!this.multiline||t.shiftKey||t.ctrlKey)){var s=i.value,r=/^\/(\S*)\s*(.*)$/i.exec(s);if(r){var u=r[1],c=r[2],l=!1;if(u){switch(u){case"scrollspeed":if(c){if(a=c,n=parseInt(a),isNaN(n)||a!=n||a.toString()!=n.toString()){this.cr.channels.main.onErrorEvent("syntax","/scrollspeed [time in milliseconds]"),localStorage.scrollTime="330",l=!0;break}localStorage.scrollTime=c}else this.cr.channels.main.onErrorEvent("syntax","/scrollspeed [time in milliseconds]")}l&&i.value&&(i.value="",i.focus())}}}return!l&&!!this.onKey_scroll(t,o,e)},dAmnChatInput.prototype.onKey=dAmnChatInput_onKey,dAmnChatInput.prototype.onKey_scroll=dAmnChatInput_onKey_scroll})}.toString()),smooth_script.appendChild(document.createTextNode(smoothScript)),document.getElementsByTagName("head")[0].appendChild(smooth_script),
// @run-at document-start
$(function(){$(document).ready(function(){$('<link rel="Stylesheet" href="" type="text/css" id="style"/>').appendTo(document.body),$('<div style="position: absolute; margin-left: 96%; top: 52px;"><br><div style="font-size:9px; position: absolute; margin-left: -65px; top: 21.8px; color:#f1f1f1;">DAmn Styler</div><button style="width:19px; height:10px; background-image: linear-gradient(gray, lightgray); font-size:.01em; cursor: pointer;">Blue</button> <button style="width:19px; height:10px; background-image: linear-gradient(gray, black); font-size:.001em; cursor: pointer;">Old</button></div>').appendTo(document.body),$("button").click(function(){"Blue"===this.textContent?$("link#style").attr("href","https://dl.dropboxusercontent.com/s/zv07nuaz2nc31c0/WorkingSoFar.css"):"Old"===this.textContent&&$("link#style").attr("href","https://dl.dropboxusercontent.com/s/agaw50t1z22up5g/test.css")})})});
